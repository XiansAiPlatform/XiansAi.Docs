<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Enterprise-grade Agent Development Kit for building, deploying, and orchestrating AI agents"><meta name=author content="Xians.ai Team"><link href=https://xiansaiplatform.github.io/XiansAi.Docs/concepts/messaging/ rel=canonical><link href=../replying/ rel=prev><link href=../knowledge/ rel=next><link rel=icon href=../../assets/logo.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Proactive Messaging - Xians.ai Documentation</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M1%207.775V2.75C1%201.784%201.784%201%202.75%201h5.025c.464%200%20.91.184%201.238.513l6.25%206.25a1.75%201.75%200%200%201%200%202.474l-5.026%205.026a1.75%201.75%200%200%201-2.474%200l-6.25-6.25A1.75%201.75%200%200%201%201%207.775m1.5%200c0%20.066.026.13.073.177l6.25%206.25a.25.25%200%200%200%20.354%200l5.025-5.025a.25.25%200%200%200%200-.354l-6.25-6.25a.25.25%200%200%200-.177-.073H2.75a.25.25%200%200%200-.25.25ZM6%205a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2.5%201.75v11.5c0%20.138.112.25.25.25h3.17a.75.75%200%200%201%200%201.5H2.75A1.75%201.75%200%200%201%201%2013.25V1.75C1%20.784%201.784%200%202.75%200h8.5C12.216%200%2013%20.784%2013%201.75v7.736a.75.75%200%200%201-1.5%200V1.75a.25.25%200%200%200-.25-.25h-8.5a.25.25%200%200%200-.25.25m13.274%209.537zl-4.557%204.45a.75.75%200%200%201-1.055-.008l-1.943-1.95a.75.75%200%200%201%201.062-1.058l1.419%201.425%204.026-3.932a.75.75%200%201%201%201.048%201.074M4.75%204h4.5a.75.75%200%200%201%200%201.5h-4.5a.75.75%200%200%201%200-1.5M4%207.75A.75.75%200%200%201%204.75%207h2a.75.75%200%200%201%200%201.5h-2A.75.75%200%200%201%204%207.75%22/%3E%3C/svg%3E');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M0%208a8%208%200%201%201%2016%200A8%208%200%200%201%200%208m8-6.5a6.5%206.5%200%201%200%200%2013%206.5%206.5%200%200%200%200-13M6.5%207.75A.75.75%200%200%201%207.25%207h1a.75.75%200%200%201%20.75.75v2.75h.25a.75.75%200%200%201%200%201.5h-2a.75.75%200%200%201%200-1.5h.25v-2h-.25a.75.75%200%200%201-.75-.75M8%206a1%201%200%201%201%200-2%201%201%200%200%201%200%202%22/%3E%3C/svg%3E');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M9.533.753V.752c.217%202.385%201.463%203.626%202.653%204.81C13.37%206.74%2014.498%207.863%2014.498%2010c0%203.5-3%206-6.5%206S1.5%2013.512%201.5%2010c0-1.298.536-2.56%201.425-3.286.376-.308.862%200%201.035.454C4.46%208.487%205.581%208.419%206%208c.282-.282.341-.811-.003-1.5C4.34%203.187%207.035.75%208.77.146c.39-.137.726.194.763.607M7.998%2014.5c2.832%200%205-1.98%205-4.5%200-1.463-.68-2.19-1.879-3.383l-.036-.037c-1.013-1.008-2.3-2.29-2.834-4.434-.322.256-.63.579-.864.953-.432.696-.621%201.58-.046%202.73.473.947.67%202.284-.278%203.232-.61.61-1.545.84-2.403.633a2.8%202.8%200%200%201-1.436-.874A3.2%203.2%200%200%200%203%2010c0%202.53%202.164%204.5%204.998%204.5%22/%3E%3C/svg%3E');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M13.78%204.22a.75.75%200%200%201%200%201.06l-7.25%207.25a.75.75%200%200%201-1.06%200L2.22%209.28a.75.75%200%200%201%20.018-1.042.75.75%200%200%201%201.042-.018L6%2010.94l6.72-6.72a.75.75%200%200%201%201.06%200%22/%3E%3C/svg%3E');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M0%208a8%208%200%201%201%2016%200A8%208%200%200%201%200%208m8-6.5a6.5%206.5%200%201%200%200%2013%206.5%206.5%200%200%200%200-13M6.92%206.085h.001a.749.749%200%201%201-1.342-.67c.169-.339.436-.701.849-.977C6.845%204.16%207.369%204%208%204a2.76%202.76%200%200%201%201.637.525c.503.377.863.965.863%201.725%200%20.448-.115.83-.329%201.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6%206%200%200%200-.26.16%201%201%200%200%200-.276.245.75.75%200%200%201-1.248-.832c.184-.264.42-.489.692-.661q.154-.1.313-.195l.007-.004c.1-.061.182-.11.258-.161a1%201%200%200%200%20.277-.245C8.96%206.514%209%206.427%209%206.25a.61.61%200%200%200-.262-.525A1.27%201.27%200%200%200%208%205.5c-.369%200-.595.09-.74.187a1%201%200%200%200-.34.398M9%2011a1%201%200%201%201-2%200%201%201%200%200%201%202%200%22/%3E%3C/svg%3E');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M6.457%201.047c.659-1.234%202.427-1.234%203.086%200l6.082%2011.378A1.75%201.75%200%200%201%2014.082%2015H1.918a1.75%201.75%200%200%201-1.543-2.575Zm1.763.707a.25.25%200%200%200-.44%200L1.698%2013.132a.25.25%200%200%200%20.22.368h12.164a.25.25%200%200%200%20.22-.368Zm.53%203.996v2.5a.75.75%200%200%201-1.5%200v-2.5a.75.75%200%200%201%201.5%200M9%2011a1%201%200%201%201-2%200%201%201%200%200%201%202%200%22/%3E%3C/svg%3E');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2.344%202.343za8%208%200%200%201%2011.314%2011.314A8.002%208.002%200%200%201%20.234%2010.089a8%208%200%200%201%202.11-7.746m1.06%2010.253a6.5%206.5%200%201%200%209.108-9.275%206.5%206.5%200%200%200-9.108%209.275M6.03%204.97%208%206.94l1.97-1.97a.749.749%200%200%201%201.275.326.75.75%200%200%201-.215.734L9.06%208l1.97%201.97a.749.749%200%200%201-.326%201.275.75.75%200%200%201-.734-.215L8%209.06l-1.97%201.97a.749.749%200%200%201-1.275-.326.75.75%200%200%201%20.215-.734L6.94%208%204.97%206.03a.75.75%200%200%201%20.018-1.042.75.75%200%200%201%201.042-.018%22/%3E%3C/svg%3E');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M9.504.43a1.516%201.516%200%200%201%202.437%201.713L10.415%205.5h2.123c1.57%200%202.346%201.909%201.22%203.004l-7.34%207.142a1.25%201.25%200%200%201-.871.354h-.302a1.25%201.25%200%200%201-1.157-1.723L5.633%2010.5H3.462c-1.57%200-2.346-1.909-1.22-3.004zm1.047%201.074L3.286%208.571A.25.25%200%200%200%203.462%209H6.75a.75.75%200%200%201%20.694%201.034l-1.713%204.188%206.982-6.793A.25.25%200%200%200%2012.538%207H9.25a.75.75%200%200%201-.683-1.06l2.008-4.418.003-.006-.004-.009-.006-.006-.008-.001q-.005%200-.009.004%22/%3E%3C/svg%3E');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M4.72.22a.75.75%200%200%201%201.06%200l1%20.999a3.5%203.5%200%200%201%202.441%200l.999-1a.748.748%200%200%201%201.265.332.75.75%200%200%201-.205.729l-.775.776c.616.63.995%201.493.995%202.444v.327q0%20.15-.025.292c.408.14.764.392%201.029.722l1.968-.787a.75.75%200%200%201%20.556%201.392L13%207.258V9h2.25a.75.75%200%200%201%200%201.5H13v.5q-.002.615-.141%201.186l2.17.868a.75.75%200%200%201-.557%201.392l-2.184-.873A5%205%200%200%201%208%2016a5%205%200%200%201-4.288-2.427l-2.183.873a.75.75%200%200%201-.558-1.392l2.17-.868A5%205%200%200%201%203%2011v-.5H.75a.75.75%200%200%201%200-1.5H3V7.258L.971%206.446a.75.75%200%200%201%20.558-1.392l1.967.787c.265-.33.62-.583%201.03-.722a1.7%201.7%200%200%201-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72%201.28a.75.75%200%200%201%200-1.06m.53%206.28a.75.75%200%200%200-.75.75V11a3.5%203.5%200%201%200%207%200V7.25a.75.75%200%200%200-.75-.75ZM6.173%205h3.654A.17.17%200%200%200%2010%204.827V4.5a2%202%200%201%200-4%200v.327c0%20.096.077.173.173.173%22/%3E%3C/svg%3E');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5%205.782V2.5h-.25a.75.75%200%200%201%200-1.5h6.5a.75.75%200%200%201%200%201.5H11v3.282l3.666%205.76C15.619%2013.04%2014.543%2015%2012.767%2015H3.233c-1.776%200-2.852-1.96-1.899-3.458Zm-2.4%206.565a.75.75%200%200%200%20.633%201.153h9.534a.75.75%200%200%200%20.633-1.153L12.225%2010.5h-8.45ZM9.5%202.5h-3V6c0%20.143-.04.283-.117.403L4.73%209h6.54L9.617%206.403A.75.75%200%200%201%209.5%206Z%22/%3E%3C/svg%3E');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M1.75%202.5h10.5a.75.75%200%200%201%200%201.5H1.75a.75.75%200%200%201%200-1.5m4%205h8.5a.75.75%200%200%201%200%201.5h-8.5a.75.75%200%200%201%200-1.5m0%205h8.5a.75.75%200%200%201%200%201.5h-8.5a.75.75%200%200%201%200-1.5M2.5%207.75v6a.75.75%200%200%201-1.5%200v-6a.75.75%200%200%201%201.5%200%22/%3E%3C/svg%3E');}</style><style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M17%2013h-4v4h-2v-4H7v-2h4V7h2v4h4m-5-9A10%2010%200%200%200%202%2012a10%2010%200%200%200%2010%2010%2010%2010%200%200%200%2010-10A10%2010%200%200%200%2012%202%22/%3E%3C/svg%3E');}</style><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style><link rel=stylesheet href=../../css/timeago.css><link rel=stylesheet href=../../stylesheets/extra.css><link rel=stylesheet href=../../stylesheets/animations.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#proactive-messaging class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Xians.ai Documentation" class="md-header__button md-logo" aria-label="Xians.ai Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Xians.ai Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Proactive Messaging </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/XiansAiPlatform/XiansAi.Docs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> XiansAiPlatform/XiansAi.Docs </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../introduction/overview/ class=md-tabs__link> Introduction </a> </li> <li class=md-tabs__item> <a href=../../getting-started/overview/ class=md-tabs__link> Getting Started </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../overview/ class=md-tabs__link> Agent Concepts </a> </li> <li class=md-tabs__item> <a href=../../server/encryption/ class=md-tabs__link> Server </a> </li> <li class=md-tabs__item> <a href=../../contribution/learning-path/ class=md-tabs__link> Contribution </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Xians.ai Documentation" class="md-nav__button md-logo" aria-label="Xians.ai Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Xians.ai Documentation </label> <div class=md-nav__source> <a href=https://github.com/XiansAiPlatform/XiansAi.Docs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> XiansAiPlatform/XiansAi.Docs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../introduction/overview/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../getting-started/overview/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Agent Concepts </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Agent Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../sdk-patterns/ class=md-nav__link> <span class=md-ellipsis> SDK Patterns </span> </a> </li> <li class=md-nav__item> <a href=../agents/ class=md-nav__link> <span class=md-ellipsis> Agents </span> </a> </li> <li class=md-nav__item> <a href=../context/ class=md-nav__link> <span class=md-ellipsis> Operating Context </span> </a> </li> <li class=md-nav__item> <a href=../multitenancy/ class=md-nav__link> <span class=md-ellipsis> Multitenancy </span> </a> </li> <li class=md-nav__item> <a href=../replying/ class=md-nav__link> <span class=md-ellipsis> Replying to User </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Proactive Messaging </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Proactive Messaging </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#accessing-proactive-messaging class=md-nav__link> <span class=md-ellipsis> Accessing Proactive Messaging </span> </a> </li> <li class=md-nav__item> <a href=#message-types class=md-nav__link> <span class=md-ellipsis> Message Types </span> </a> </li> <li class=md-nav__item> <a href=#sending-chat-messages class=md-nav__link> <span class=md-ellipsis> Sending Chat Messages </span> </a> </li> <li class=md-nav__item> <a href=#sending-data-messages class=md-nav__link> <span class=md-ellipsis> Sending Data Messages </span> </a> </li> <li class=md-nav__item> <a href=#workflow-impersonation class=md-nav__link> <span class=md-ellipsis> Workflow Impersonation </span> </a> </li> <li class=md-nav__item> <a href=#supervisor-workflow-shortcuts class=md-nav__link> <span class=md-ellipsis> Supervisor Workflow Shortcuts </span> </a> </li> <li class=md-nav__item> <a href=#complete-method-signatures class=md-nav__link> <span class=md-ellipsis> Complete Method Signatures </span> </a> </li> <li class=md-nav__item> <a href=#practical-examples class=md-nav__link> <span class=md-ellipsis> Practical Examples </span> </a> </li> <li class=md-nav__item> <a href=#best-practices class=md-nav__link> <span class=md-ellipsis> Best Practices </span> </a> </li> <li class=md-nav__item> <a href=#common-use-cases class=md-nav__link> <span class=md-ellipsis> Common Use Cases </span> </a> </li> <li class=md-nav__item> <a href=#comparison-proactive-messaging-vs-replying class=md-nav__link> <span class=md-ellipsis> Comparison: Proactive Messaging vs Replying </span> </a> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> <li class=md-nav__item> <a href=#next-steps class=md-nav__link> <span class=md-ellipsis> Next Steps </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../knowledge/ class=md-nav__link> <span class=md-ellipsis> Knowledge </span> </a> </li> <li class=md-nav__item> <a href=../document-db/ class=md-nav__link> <span class=md-ellipsis> Document DB </span> </a> </li> <li class=md-nav__item> <a href=../scheduling/ class=md-nav__link> <span class=md-ellipsis> Scheduling </span> </a> </li> <li class=md-nav__item> <a href=../A2A/ class=md-nav__link> <span class=md-ellipsis> Agent-to-Agent (A2A) </span> </a> </li> <li class=md-nav__item> <a href=../hitl-tasks/ class=md-nav__link> <span class=md-ellipsis> Human-in-the-Loop </span> </a> </li> <li class=md-nav__item> <a href=../webhook/ class=md-nav__link> <span class=md-ellipsis> Webhooks </span> </a> </li> <li class=md-nav__item> <a href=../workflows/ class=md-nav__link> <span class=md-ellipsis> Workflows </span> </a> </li> <li class=md-nav__item> <a href=../metrics/ class=md-nav__link> <span class=md-ellipsis> Metrics </span> </a> </li> <li class=md-nav__item> <a href=../logging/ class=md-nav__link> <span class=md-ellipsis> Logging </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../server/encryption/ class=md-nav__link> <span class=md-ellipsis> Server </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../contribution/learning-path/ class=md-nav__link> <span class=md-ellipsis> Contribution </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <nav class=md-path aria-label=Navigation> <ol class=md-path__list> <li class=md-path__item> <a href=../.. class=md-path__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-path__item> <a href=../overview/ class=md-path__link> <span class=md-ellipsis> Agent Concepts </span> </a> </li> </ol> </nav> <article class="md-content__inner md-typeset"> <a href=https://github.com/XiansAiPlatform/XiansAi.Docs/edit/main/docs/concepts/messaging.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"/></svg> </a> <a href=https://github.com/XiansAiPlatform/XiansAi.Docs/raw/main/docs/concepts/messaging.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5"/></svg> </a> <h1 id=proactive-messaging>Proactive Messaging<a class=headerlink href=#proactive-messaging title="Link to this section">&para;</a></h1> <p>Proactive messaging enables your agent to initiate conversations and send messages to users without waiting for user input. This is essential for background workflows, scheduled tasks, event-driven notifications, and any scenario where your agent needs to reach out to users independently.</p> <h2 id=overview>Overview<a class=headerlink href=#overview title="Link to this section">&para;</a></h2> <p>While <strong>replying</strong> handles responses to incoming user messages (covered in <a href=../replying/ >Replying</a>), <strong>proactive messaging</strong> allows your agent to:</p> <ul> <li>Send notifications from background workflows</li> <li>Deliver scheduled reminders or updates</li> <li>Alert users about important events</li> <li>Communicate from automated processes</li> <li>Send messages from workflows that users didn't directly interact with</li> </ul> <h3 id=when-to-use-proactive-messaging>When to Use Proactive Messaging<a class=headerlink href=#when-to-use-proactive-messaging title="Link to this section">&para;</a></h3> <p>Use proactive messaging when:</p> <p><strong>Background Workflows</strong>: A scheduled or event-driven workflow needs to notify users<br> <strong>System Events</strong>: Your agent detects an important event requiring user notification<br> <strong>Scheduled Updates</strong>: Time-based workflows send periodic updates or reminders<br> <strong>Cross-Workflow Communication</strong>: One workflow needs to send messages on behalf of another<br> <strong>Automated Processes</strong>: Background automation completes and needs to inform users</p> <p>Use <a href=../replying/ >replying</a> (UserMessageContext.ReplyAsync) when:</p> <p><strong>Responding to User Input</strong>: You're handling an incoming message from a user<br> <strong>Conversational Flows</strong>: You're in an active back-and-forth conversation</p> <h2 id=accessing-proactive-messaging>Accessing Proactive Messaging<a class=headerlink href=#accessing-proactive-messaging title="Link to this section">&para;</a></h2> <p>Proactive messaging is available through <code>XiansContext.Messaging</code> from any workflow or activity:</p> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=c1>// In any workflow or activity</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Your order has shipped!&quot;</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=p>);</span>
</span></code></pre></div> <h2 id=message-types>Message Types<a class=headerlink href=#message-types title="Link to this section">&para;</a></h2> <p>Xians provides several methods for proactive messaging:</p> <table> <thead> <tr> <th>Method</th> <th>Purpose</th> <th>Use Case</th> </tr> </thead> <tbody> <tr> <td><code>SendChatAsync</code></td> <td>Send chat messages from current workflow</td> <td>Standard notifications and updates</td> </tr> <tr> <td><code>SendDataAsync</code></td> <td>Send data messages from current workflow</td> <td>Structured data delivery</td> </tr> <tr> <td><code>SendChatAsWorkflowAsync</code></td> <td>Send chat messages as another workflow</td> <td>Background workflows impersonating main workflows</td> </tr> <tr> <td><code>SendDataAsWorkflowAsync</code></td> <td>Send data messages as another workflow</td> <td>Background data delivery from impersonated workflows</td> </tr> <tr> <td><code>SendChatAsSupervisorAsync</code></td> <td>Send chat messages as Supervisor workflow</td> <td>Shorthand for messaging as Supervisor</td> </tr> <tr> <td><code>SendDataAsSupervisorAsync</code></td> <td>Send data messages as Supervisor workflow</td> <td>Shorthand for data delivery as Supervisor</td> </tr> </tbody> </table> <h2 id=sending-chat-messages>Sending Chat Messages<a class=headerlink href=#sending-chat-messages title="Link to this section">&para;</a></h2> <h3 id=basic-chat-messages>Basic Chat Messages<a class=headerlink href=#basic-chat-messages title="Link to this section">&para;</a></h3> <p>The most common use case is sending simple text messages:</p> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=c1>// In a scheduled workflow</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Reminder: Your appointment is tomorrow at 2 PM&quot;</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=p>);</span>
</span></code></pre></div> <h3 id=chat-messages-with-data>Chat Messages with Data<a class=headerlink href=#chat-messages-with-data title="Link to this section">&para;</a></h3> <p>Include structured data alongside your message:</p> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=kt>var</span><span class=w> </span><span class=n>orderDetails</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=p>{</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>    </span><span class=n>OrderId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;ORD-12345&quot;</span><span class=p>,</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>    </span><span class=n>Status</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;Shipped&quot;</span><span class=p>,</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=w>    </span><span class=n>TrackingNumber</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;1Z999AA10123456784&quot;</span><span class=p>,</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=w>    </span><span class=n>EstimatedDelivery</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>DateTime</span><span class=p>.</span><span class=n>UtcNow</span><span class=p>.</span><span class=n>AddDays</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=p>};</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-2-11><a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Your order has shipped!&quot;</span><span class=p>,</span>
</span><span id=__span-2-12><a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a><span class=w>    </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=n>orderDetails</span>
</span><span id=__span-2-13><a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a><span class=p>);</span>
</span></code></pre></div> <h3 id=chat-messages-with-scope>Chat Messages with Scope<a class=headerlink href=#chat-messages-with-scope title="Link to this section">&para;</a></h3> <p>Use scope to organize messages into topics:</p> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Your delivery is arriving today&quot;</span><span class=p>,</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>    </span><span class=n>scope</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Order #12345 - Delivery Updates&quot;</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=p>);</span>
</span></code></pre></div> <p>Learn more about message scope in <a href=../replying/#message-scope>Replying - Message Scope</a>.</p> <h3 id=chat-messages-with-hints>Chat Messages with Hints<a class=headerlink href=#chat-messages-with-hints title="Link to this section">&para;</a></h3> <p>Provide hints for message processing:</p> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Your payment method needs updating&quot;</span><span class=p>,</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>    </span><span class=n>hint</span><span class=p>:</span><span class=w> </span><span class=s>&quot;payment-reminder&quot;</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=p>);</span>
</span></code></pre></div> <h2 id=sending-data-messages>Sending Data Messages<a class=headerlink href=#sending-data-messages title="Link to this section">&para;</a></h2> <p>When the primary content is structured data (not text), use <code>SendDataAsync</code>:</p> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=kt>var</span><span class=w> </span><span class=n>analyticsReport</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=p>{</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>    </span><span class=n>Period</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;2026-01&quot;</span><span class=p>,</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>    </span><span class=n>TotalRevenue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>125000</span><span class=p>,</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>    </span><span class=n>NewCustomers</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>47</span><span class=p>,</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>    </span><span class=n>ConversionRate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0.23</span><span class=p>,</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=w>    </span><span class=n>TopProducts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=p>[]</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=s>&quot;Widget A&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Gadget B&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Tool C&quot;</span><span class=w> </span><span class=p>}</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=p>};</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendDataAsync</span><span class=p>(</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Your monthly analytics report is ready&quot;</span><span class=p>,</span>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=w>    </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=n>analyticsReport</span>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Key Difference:</strong> - <code>SendChatAsync</code>: Text is primary, data is supplementary - <code>SendDataAsync</code>: Data is primary, text is descriptive</p> <h2 id=workflow-impersonation>Workflow Impersonation<a class=headerlink href=#workflow-impersonation title="Link to this section">&para;</a></h2> <p>Background workflows often need to send messages that appear to come from the user's main conversational workflow. This is called <strong>workflow impersonation</strong>.</p> <h3 id=why-impersonate-workflows>Why Impersonate Workflows?<a class=headerlink href=#why-impersonate-workflows title="Link to this section">&para;</a></h3> <p>Consider this scenario:</p> <ol> <li>User chats with your "Customer Support" workflow</li> <li>You start a background "Order Monitoring" workflow to track their order</li> <li>When the order ships, the monitoring workflow needs to notify the user</li> <li>The message should appear in the user's "Customer Support" conversation, not from an unknown background workflow</li> </ol> <h3 id=sending-chat-messages-as-another-workflow>Sending Chat Messages as Another Workflow<a class=headerlink href=#sending-chat-messages-as-another-workflow title="Link to this section">&para;</a></h3> <p>Use <code>SendChatAsWorkflowAsync</code> to send messages on behalf of a different workflow:</p> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c1>// In a background &quot;OrderMonitoring&quot; workflow</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsWorkflowAsync</span><span class=p>(</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>    </span><span class=n>builtinWorkflowName</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Conversational&quot;</span><span class=p>,</span><span class=w>  </span><span class=c1>// The workflow to impersonate</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Great news! Your order has shipped and is on its way.&quot;</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=p>);</span>
</span></code></pre></div> <p>The user receives this message as if it came from their "Conversational" workflow, maintaining conversation continuity.</p> <h3 id=sending-data-messages-as-another-workflow>Sending Data Messages as Another Workflow<a class=headerlink href=#sending-data-messages-as-another-workflow title="Link to this section">&para;</a></h3> <p>Similarly, send data messages while impersonating a workflow:</p> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1>// In a background analytics workflow</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=kt>var</span><span class=w> </span><span class=n>dashboardData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=p>{</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=w>    </span><span class=n>Metrics</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=p>[]</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>100</span><span class=p>,</span><span class=w> </span><span class=mi>200</span><span class=p>,</span><span class=w> </span><span class=mi>150</span><span class=p>,</span><span class=w> </span><span class=mi>300</span><span class=w> </span><span class=p>},</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=w>    </span><span class=n>Labels</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=p>[]</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=s>&quot;Week 1&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Week 2&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Week 3&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Week 4&quot;</span><span class=w> </span><span class=p>}</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=p>};</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendDataAsWorkflowAsync</span><span class=p>(</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=w>    </span><span class=n>builtinWorkflowName</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Dashboard&quot;</span><span class=p>,</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Your weekly dashboard has been updated&quot;</span><span class=p>,</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=w>    </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=n>dashboardData</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a><span class=p>);</span>
</span></code></pre></div> <h3 id=understanding-workflow-names>Understanding Workflow Names<a class=headerlink href=#understanding-workflow-names title="Link to this section">&para;</a></h3> <p>The <code>builtinWorkflowName</code> parameter refers to the <strong>workflow name</strong> you defined when creating built-in workflows, not the full workflow type:</p> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=c1>// When you define a workflow</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=kt>var</span><span class=w> </span><span class=n>chatWorkflow</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>agent</span><span class=p>.</span><span class=n>Workflows</span><span class=p>.</span><span class=n>DefineBuiltIn</span><span class=p>(</span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Conversational&quot;</span><span class=p>);</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=kt>var</span><span class=w> </span><span class=n>analyticsWorkflow</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>agent</span><span class=p>.</span><span class=n>Workflows</span><span class=p>.</span><span class=n>DefineBuiltIn</span><span class=p>(</span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Analytics&quot;</span><span class=p>);</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=c1>// Use the name when impersonating</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsWorkflowAsync</span><span class=p>(</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=w>    </span><span class=n>builtinWorkflowName</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Conversational&quot;</span><span class=p>,</span><span class=w>  </span><span class=c1>//  Use the workflow name</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Message from background process&quot;</span>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a><span class=p>);</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a><span class=c1>// NOT the full workflow type</span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a><span class=c1>//  Don&#39;t use &quot;MyAgent:Conversational&quot;</span>
</span></code></pre></div> <h2 id=supervisor-workflow-shortcuts>Supervisor Workflow Shortcuts<a class=headerlink href=#supervisor-workflow-shortcuts title="Link to this section">&para;</a></h2> <p>For the common scenario of sending messages as the Supervisor workflow, Xians provides convenience methods that eliminate the need to specify the workflow name:</p> <h3 id=sendchatassupervisorasync>SendChatAsSupervisorAsync<a class=headerlink href=#sendchatassupervisorasync title="Link to this section">&para;</a></h3> <p>Send chat messages as the Supervisor workflow without specifying the workflow name:</p> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=c1>// Instead of this</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsWorkflowAsync</span><span class=p>(</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>    </span><span class=n>builtinWorkflowName</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Supervisor Workflow&quot;</span><span class=p>,</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Task completed successfully&quot;</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=p>);</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=c1>// Use this shorthand</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsSupervisorAsync</span><span class=p>(</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Task completed successfully&quot;</span>
</span><span id=__span-9-12><a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a><span class=p>);</span>
</span><span id=__span-9-13><a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a>
</span><span id=__span-9-14><a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a><span class=c1>// Or without explicit participantId (uses current participant from context)</span>
</span><span id=__span-9-15><a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsSupervisorAsync</span><span class=p>(</span>
</span><span id=__span-9-16><a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Background processing complete&quot;</span><span class=p>,</span>
</span><span id=__span-9-17><a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a><span class=w>    </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>Status</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;Success&quot;</span><span class=p>,</span><span class=w> </span><span class=n>ProcessedItems</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>150</span><span class=w> </span><span class=p>}</span>
</span><span id=__span-9-18><a id=__codelineno-9-18 name=__codelineno-9-18 href=#__codelineno-9-18></a><span class=p>);</span>
</span></code></pre></div> <h3 id=senddataassupervisorasync>SendDataAsSupervisorAsync<a class=headerlink href=#senddataassupervisorasync title="Link to this section">&para;</a></h3> <p>Send data messages as the Supervisor workflow:</p> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=c1>// Shorthand for sending data as Supervisor</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendDataAsSupervisorAsync</span><span class=p>(</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Task execution report&quot;</span><span class=p>,</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=w>    </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=k>new</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=w>        </span><span class=n>TaskId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;task-456&quot;</span><span class=p>,</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=w>        </span><span class=n>Duration</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>TimeSpan</span><span class=p>.</span><span class=n>FromMinutes</span><span class=p>(</span><span class=mi>5</span><span class=p>),</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=w>        </span><span class=n>Result</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;Success&quot;</span>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a><span class=p>);</span>
</span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a>
</span><span id=__span-10-13><a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a><span class=c1>// Or using current participant</span>
</span><span id=__span-10-14><a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendDataAsSupervisorAsync</span><span class=p>(</span>
</span><span id=__span-10-15><a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Workflow metrics&quot;</span><span class=p>,</span>
</span><span id=__span-10-16><a id=__codelineno-10-16 name=__codelineno-10-16 href=#__codelineno-10-16></a><span class=w>    </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=n>workflowMetrics</span><span class=p>,</span>
</span><span id=__span-10-17><a id=__codelineno-10-17 name=__codelineno-10-17 href=#__codelineno-10-17></a><span class=w>    </span><span class=n>scope</span><span class=p>:</span><span class=w> </span><span class=s>&quot;System Monitoring&quot;</span>
</span><span id=__span-10-18><a id=__codelineno-10-18 name=__codelineno-10-18 href=#__codelineno-10-18></a><span class=p>);</span>
</span></code></pre></div> <h3 id=when-to-use-supervisor-shortcuts>When to Use Supervisor Shortcuts<a class=headerlink href=#when-to-use-supervisor-shortcuts title="Link to this section">&para;</a></h3> <p>These convenience methods are ideal for:</p> <ul> <li><strong>Multi-agent systems</strong> where the Supervisor workflow coordinates other agents</li> <li><strong>Background task notifications</strong> that need to appear from the Supervisor</li> <li><strong>System-level updates</strong> sent from monitoring or orchestration workflows</li> <li><strong>Reducing boilerplate</strong> in code that frequently messages as Supervisor</li> </ul> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=c1>// Example: Background monitoring workflow notifying as Supervisor</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=kt>var</span><span class=w> </span><span class=n>monitoringWorkflow</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>agent</span><span class=p>.</span><span class=n>Workflows</span><span class=p>.</span><span class=n>DefineBuiltIn</span><span class=p>(</span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;SystemMonitoring&quot;</span><span class=p>);</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=n>monitoringWorkflow</span><span class=p>.</span><span class=n>RegisterWorkflow</span><span class=p>(</span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=o>=&gt;</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=p>{</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=w>    </span><span class=kt>var</span><span class=w> </span><span class=n>healthStatus</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=n>CheckSystemHealth</span><span class=p>();</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>healthStatus</span><span class=p>.</span><span class=n>HasIssues</span><span class=p>)</span>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a><span class=w>        </span><span class=c1>// Simplified: No need to specify workflow name</span>
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a><span class=w>        </span><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsSupervisorAsync</span><span class=p>(</span>
</span><span id=__span-11-12><a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a><span class=w>            </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>$&quot; System health check detected {healthStatus.IssueCount} issues&quot;</span><span class=p>,</span>
</span><span id=__span-11-13><a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a><span class=w>            </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=n>healthStatus</span><span class=p>,</span>
</span><span id=__span-11-14><a id=__codelineno-11-14 name=__codelineno-11-14 href=#__codelineno-11-14></a><span class=w>            </span><span class=n>hint</span><span class=p>:</span><span class=w> </span><span class=s>&quot;system-alert&quot;</span>
</span><span id=__span-11-15><a id=__codelineno-11-15 name=__codelineno-11-15 href=#__codelineno-11-15></a><span class=w>        </span><span class=p>);</span>
</span><span id=__span-11-16><a id=__codelineno-11-16 name=__codelineno-11-16 href=#__codelineno-11-16></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-11-17><a id=__codelineno-11-17 name=__codelineno-11-17 href=#__codelineno-11-17></a><span class=p>});</span>
</span></code></pre></div> <h2 id=complete-method-signatures>Complete Method Signatures<a class=headerlink href=#complete-method-signatures title="Link to this section">&para;</a></h2> <h3 id=sendchatasync>SendChatAsync<a class=headerlink href=#sendchatasync title="Link to this section">&para;</a></h3> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=n>Task</span><span class=w> </span><span class=nf>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=w>    </span><span class=kt>string</span><span class=w> </span><span class=n>participantId</span><span class=p>,</span><span class=w>       </span><span class=c1>// Required: User ID to send to</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=w>    </span><span class=kt>string</span><span class=w> </span><span class=n>text</span><span class=p>,</span><span class=w>                </span><span class=c1>// Required: Message text</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>    </span><span class=kt>object?</span><span class=w> </span><span class=n>data</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=p>,</span><span class=w>        </span><span class=c1>// Optional: Structured data</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=w>    </span><span class=kt>string?</span><span class=w> </span><span class=n>scope</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=p>,</span><span class=w>       </span><span class=c1>// Optional: Message scope/topic</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a><span class=w>    </span><span class=kt>string?</span><span class=w> </span><span class=n>hint</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=w>         </span><span class=c1>// Optional: Processing hint</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=p>)</span>
</span></code></pre></div> <h3 id=senddataasync>SendDataAsync<a class=headerlink href=#senddataasync title="Link to this section">&para;</a></h3> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=n>Task</span><span class=w> </span><span class=nf>SendDataAsync</span><span class=p>(</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=w>    </span><span class=kt>string</span><span class=w> </span><span class=n>participantId</span><span class=p>,</span><span class=w>       </span><span class=c1>// Required: User ID to send to</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=w>    </span><span class=kt>string</span><span class=w> </span><span class=n>text</span><span class=p>,</span><span class=w>                </span><span class=c1>// Required: Descriptive text</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=w>    </span><span class=kt>object</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w>                </span><span class=c1>// Required: Data to send</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=w>    </span><span class=kt>string?</span><span class=w> </span><span class=n>scope</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=p>,</span><span class=w>       </span><span class=c1>// Optional: Message scope/topic</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=w>    </span><span class=kt>string?</span><span class=w> </span><span class=n>hint</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=w>         </span><span class=c1>// Optional: Processing hint</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=p>)</span>
</span></code></pre></div> <h3 id=sendchatasworkflowasync>SendChatAsWorkflowAsync<a class=headerlink href=#sendchatasworkflowasync title="Link to this section">&para;</a></h3> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=n>Task</span><span class=w> </span><span class=nf>SendChatAsWorkflowAsync</span><span class=p>(</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>    </span><span class=kt>string</span><span class=w> </span><span class=n>builtinWorkflowName</span><span class=p>,</span><span class=w> </span><span class=c1>// Required: Workflow name to impersonate</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>    </span><span class=kt>string</span><span class=w> </span><span class=n>participantId</span><span class=p>,</span><span class=w>       </span><span class=c1>// Required: User ID to send to</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>    </span><span class=kt>string</span><span class=w> </span><span class=n>text</span><span class=p>,</span><span class=w>                </span><span class=c1>// Required: Message text</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>    </span><span class=kt>object?</span><span class=w> </span><span class=n>data</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=p>,</span><span class=w>        </span><span class=c1>// Optional: Structured data</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=w>    </span><span class=kt>string?</span><span class=w> </span><span class=n>scope</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=p>,</span><span class=w>       </span><span class=c1>// Optional: Message scope/topic</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>    </span><span class=kt>string?</span><span class=w> </span><span class=n>hint</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=w>         </span><span class=c1>// Optional: Processing hint</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=p>)</span>
</span></code></pre></div> <h3 id=senddataasworkflowasync>SendDataAsWorkflowAsync<a class=headerlink href=#senddataasworkflowasync title="Link to this section">&para;</a></h3> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=n>Task</span><span class=w> </span><span class=nf>SendDataAsWorkflowAsync</span><span class=p>(</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>    </span><span class=kt>string</span><span class=w> </span><span class=n>builtinWorkflowName</span><span class=p>,</span><span class=w> </span><span class=c1>// Required: Workflow name to impersonate</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>    </span><span class=kt>string</span><span class=w> </span><span class=n>participantId</span><span class=p>,</span><span class=w>       </span><span class=c1>// Required: User ID to send to</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>    </span><span class=kt>string</span><span class=w> </span><span class=n>text</span><span class=p>,</span><span class=w>                </span><span class=c1>// Required: Descriptive text</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=w>    </span><span class=kt>object</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w>                </span><span class=c1>// Required: Data to send</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=w>    </span><span class=kt>string?</span><span class=w> </span><span class=n>scope</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=p>,</span><span class=w>       </span><span class=c1>// Optional: Message scope/topic</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=w>    </span><span class=kt>string?</span><span class=w> </span><span class=n>hint</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=w>         </span><span class=c1>// Optional: Processing hint</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=p>)</span>
</span></code></pre></div> <h3 id=sendchatassupervisorasync_1>SendChatAsSupervisorAsync<a class=headerlink href=#sendchatassupervisorasync_1 title="Link to this section">&para;</a></h3> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=c1>// With explicit participant ID</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=n>Task</span><span class=w> </span><span class=nf>SendChatAsSupervisorAsync</span><span class=p>(</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=w>    </span><span class=kt>string</span><span class=w> </span><span class=n>participantId</span><span class=p>,</span><span class=w>       </span><span class=c1>// Required: User ID to send to</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=w>    </span><span class=kt>string</span><span class=w> </span><span class=n>text</span><span class=p>,</span><span class=w>                </span><span class=c1>// Required: Message text</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=w>    </span><span class=kt>object?</span><span class=w> </span><span class=n>data</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=p>,</span><span class=w>        </span><span class=c1>// Optional: Structured data</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=w>    </span><span class=kt>string?</span><span class=w> </span><span class=n>scope</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=p>,</span><span class=w>       </span><span class=c1>// Optional: Message scope/topic</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=w>    </span><span class=kt>string?</span><span class=w> </span><span class=n>hint</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=w>         </span><span class=c1>// Optional: Processing hint</span>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=p>)</span>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a>
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a><span class=c1>// Using current participant from context</span>
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=n>Task</span><span class=w> </span><span class=nf>SendChatAsSupervisorAsync</span><span class=p>(</span>
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a><span class=w>    </span><span class=kt>string</span><span class=w> </span><span class=n>text</span><span class=p>,</span><span class=w>                </span><span class=c1>// Required: Message text</span>
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a><span class=w>    </span><span class=kt>object?</span><span class=w> </span><span class=n>data</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=p>,</span><span class=w>        </span><span class=c1>// Optional: Structured data</span>
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a><span class=w>    </span><span class=kt>string?</span><span class=w> </span><span class=n>scope</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=p>,</span><span class=w>       </span><span class=c1>// Optional: Message scope/topic</span>
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a><span class=w>    </span><span class=kt>string?</span><span class=w> </span><span class=n>hint</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=w>         </span><span class=c1>// Optional: Processing hint</span>
</span><span id=__span-16-16><a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a><span class=p>)</span>
</span></code></pre></div> <h3 id=senddataassupervisorasync_1>SendDataAsSupervisorAsync<a class=headerlink href=#senddataassupervisorasync_1 title="Link to this section">&para;</a></h3> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=c1>// With explicit participant ID</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=n>Task</span><span class=w> </span><span class=nf>SendDataAsSupervisorAsync</span><span class=p>(</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=w>    </span><span class=kt>string</span><span class=w> </span><span class=n>participantId</span><span class=p>,</span><span class=w>       </span><span class=c1>// Required: User ID to send to</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=w>    </span><span class=kt>string</span><span class=w> </span><span class=n>text</span><span class=p>,</span><span class=w>                </span><span class=c1>// Required: Descriptive text</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=w>    </span><span class=kt>object</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w>                </span><span class=c1>// Required: Data to send</span>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a><span class=w>    </span><span class=kt>string?</span><span class=w> </span><span class=n>scope</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=p>,</span><span class=w>       </span><span class=c1>// Optional: Message scope/topic</span>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=w>    </span><span class=kt>string?</span><span class=w> </span><span class=n>hint</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=w>         </span><span class=c1>// Optional: Processing hint</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a><span class=p>)</span>
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a>
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a><span class=c1>// Using current participant from context</span>
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a><span class=n>Task</span><span class=w> </span><span class=nf>SendDataAsSupervisorAsync</span><span class=p>(</span>
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a><span class=w>    </span><span class=kt>string</span><span class=w> </span><span class=n>text</span><span class=p>,</span><span class=w>                </span><span class=c1>// Required: Descriptive text</span>
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a><span class=w>    </span><span class=kt>object</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w>                </span><span class=c1>// Required: Data to send</span>
</span><span id=__span-17-14><a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a><span class=w>    </span><span class=kt>string?</span><span class=w> </span><span class=n>scope</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=p>,</span><span class=w>       </span><span class=c1>// Optional: Message scope/topic</span>
</span><span id=__span-17-15><a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a><span class=w>    </span><span class=kt>string?</span><span class=w> </span><span class=n>hint</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=w>         </span><span class=c1>// Optional: Processing hint</span>
</span><span id=__span-17-16><a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a><span class=p>)</span>
</span></code></pre></div> <h2 id=practical-examples>Practical Examples<a class=headerlink href=#practical-examples title="Link to this section">&para;</a></h2> <h3 id=example-1-scheduled-reminder-workflow>Example 1: Scheduled Reminder Workflow<a class=headerlink href=#example-1-scheduled-reminder-workflow title="Link to this section">&para;</a></h3> <p>A background workflow that sends daily reminders:</p> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=kt>var</span><span class=w> </span><span class=n>reminderWorkflow</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>agent</span><span class=p>.</span><span class=n>Workflows</span><span class=p>.</span><span class=n>DefineBuiltIn</span><span class=p>(</span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;DailyReminder&quot;</span><span class=p>);</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=n>reminderWorkflow</span><span class=p>.</span><span class=n>RegisterWorkflow</span><span class=p>(</span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=o>=&gt;</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=p>{</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=w>    </span><span class=c1>// Get users who need reminders</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a><span class=w>    </span><span class=kt>var</span><span class=w> </span><span class=n>usersToNotify</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=n>GetUsersWithPendingTasks</span><span class=p>();</span>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a>
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a><span class=w>    </span><span class=k>foreach</span><span class=w> </span><span class=p>(</span><span class=kt>var</span><span class=w> </span><span class=n>user</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>usersToNotify</span><span class=p>)</span>
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-18-10><a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a><span class=w>        </span><span class=kt>var</span><span class=w> </span><span class=n>tasks</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=n>GetUserTasks</span><span class=p>(</span><span class=n>user</span><span class=p>.</span><span class=n>Id</span><span class=p>);</span>
</span><span id=__span-18-11><a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a>
</span><span id=__span-18-12><a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a><span class=w>        </span><span class=c1>// Send as the main Conversational workflow</span>
</span><span id=__span-18-13><a id=__codelineno-18-13 name=__codelineno-18-13 href=#__codelineno-18-13></a><span class=w>        </span><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsWorkflowAsync</span><span class=p>(</span>
</span><span id=__span-18-14><a id=__codelineno-18-14 name=__codelineno-18-14 href=#__codelineno-18-14></a><span class=w>            </span><span class=n>builtinWorkflowName</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Conversational&quot;</span><span class=p>,</span>
</span><span id=__span-18-15><a id=__codelineno-18-15 name=__codelineno-18-15 href=#__codelineno-18-15></a><span class=w>            </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>user</span><span class=p>.</span><span class=n>Id</span><span class=p>,</span>
</span><span id=__span-18-16><a id=__codelineno-18-16 name=__codelineno-18-16 href=#__codelineno-18-16></a><span class=w>            </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>$&quot;You have {tasks.Count} pending tasks for today!&quot;</span><span class=p>,</span>
</span><span id=__span-18-17><a id=__codelineno-18-17 name=__codelineno-18-17 href=#__codelineno-18-17></a><span class=w>            </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>Tasks</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tasks</span><span class=w> </span><span class=p>},</span>
</span><span id=__span-18-18><a id=__codelineno-18-18 name=__codelineno-18-18 href=#__codelineno-18-18></a><span class=w>            </span><span class=n>scope</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Daily Reminders&quot;</span>
</span><span id=__span-18-19><a id=__codelineno-18-19 name=__codelineno-18-19 href=#__codelineno-18-19></a><span class=w>        </span><span class=p>);</span>
</span><span id=__span-18-20><a id=__codelineno-18-20 name=__codelineno-18-20 href=#__codelineno-18-20></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-18-21><a id=__codelineno-18-21 name=__codelineno-18-21 href=#__codelineno-18-21></a><span class=p>});</span>
</span></code></pre></div> <h3 id=example-2-event-driven-notification>Example 2: Event-Driven Notification<a class=headerlink href=#example-2-event-driven-notification title="Link to this section">&para;</a></h3> <p>A workflow that monitors events and notifies users:</p> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=kt>var</span><span class=w> </span><span class=n>monitoringWorkflow</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>agent</span><span class=p>.</span><span class=n>Workflows</span><span class=p>.</span><span class=n>DefineBuiltIn</span><span class=p>(</span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;PriceMonitoring&quot;</span><span class=p>);</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=n>monitoringWorkflow</span><span class=p>.</span><span class=n>RegisterWorkflow</span><span class=p>(</span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=o>=&gt;</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=p>{</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=w>    </span><span class=c1>// Monitor price changes</span>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=w>    </span><span class=kt>var</span><span class=w> </span><span class=n>priceChange</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=n>WaitForPriceChangeEvent</span><span class=p>();</span>
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a>
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>priceChange</span><span class=p>.</span><span class=n>PercentChange</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=mi>10</span><span class=p>)</span>
</span><span id=__span-19-9><a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-19-10><a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a><span class=w>        </span><span class=c1>// Alert user from their main workflow</span>
</span><span id=__span-19-11><a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a><span class=w>        </span><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsWorkflowAsync</span><span class=p>(</span>
</span><span id=__span-19-12><a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a><span class=w>            </span><span class=n>builtinWorkflowName</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Conversational&quot;</span><span class=p>,</span>
</span><span id=__span-19-13><a id=__codelineno-19-13 name=__codelineno-19-13 href=#__codelineno-19-13></a><span class=w>            </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>priceChange</span><span class=p>.</span><span class=n>UserId</span><span class=p>,</span>
</span><span id=__span-19-14><a id=__codelineno-19-14 name=__codelineno-19-14 href=#__codelineno-19-14></a><span class=w>            </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>$&quot; Price Alert: {priceChange.ProductName} dropped by {priceChange.PercentChange}%!&quot;</span><span class=p>,</span>
</span><span id=__span-19-15><a id=__codelineno-19-15 name=__codelineno-19-15 href=#__codelineno-19-15></a><span class=w>            </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=n>priceChange</span><span class=p>,</span>
</span><span id=__span-19-16><a id=__codelineno-19-16 name=__codelineno-19-16 href=#__codelineno-19-16></a><span class=w>            </span><span class=n>hint</span><span class=p>:</span><span class=w> </span><span class=s>&quot;price-alert&quot;</span>
</span><span id=__span-19-17><a id=__codelineno-19-17 name=__codelineno-19-17 href=#__codelineno-19-17></a><span class=w>        </span><span class=p>);</span>
</span><span id=__span-19-18><a id=__codelineno-19-18 name=__codelineno-19-18 href=#__codelineno-19-18></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-19-19><a id=__codelineno-19-19 name=__codelineno-19-19 href=#__codelineno-19-19></a><span class=p>});</span>
</span></code></pre></div> <h3 id=example-3-background-processing-completion>Example 3: Background Processing Completion<a class=headerlink href=#example-3-background-processing-completion title="Link to this section">&para;</a></h3> <p>Notify users when long-running tasks complete:</p> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=kt>var</span><span class=w> </span><span class=n>processingWorkflow</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>agent</span><span class=p>.</span><span class=n>Workflows</span><span class=p>.</span><span class=n>DefineBuiltIn</span><span class=p>(</span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;DataProcessing&quot;</span><span class=p>);</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a><span class=n>processingWorkflow</span><span class=p>.</span><span class=n>RegisterWorkflow</span><span class=p>(</span><span class=k>async</span><span class=w> </span><span class=p>(</span><span class=n>DataProcessingRequest</span><span class=w> </span><span class=n>request</span><span class=p>)</span><span class=w> </span><span class=o>=&gt;</span>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a><span class=p>{</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a><span class=w>    </span><span class=c1>// Perform long-running processing</span>
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a><span class=w>    </span><span class=kt>var</span><span class=w> </span><span class=n>result</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=n>ProcessLargeDataset</span><span class=p>(</span><span class=n>request</span><span class=p>.</span><span class=n>DatasetId</span><span class=p>);</span>
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a>
</span><span id=__span-20-8><a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a><span class=w>    </span><span class=c1>// Notify user of completion</span>
</span><span id=__span-20-9><a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a><span class=w>    </span><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendDataAsWorkflowAsync</span><span class=p>(</span>
</span><span id=__span-20-10><a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a><span class=w>        </span><span class=n>builtinWorkflowName</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Conversational&quot;</span><span class=p>,</span>
</span><span id=__span-20-11><a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a><span class=w>        </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>request</span><span class=p>.</span><span class=n>UserId</span><span class=p>,</span>
</span><span id=__span-20-12><a id=__codelineno-20-12 name=__codelineno-20-12 href=#__codelineno-20-12></a><span class=w>        </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Your data processing is complete! Results are ready.&quot;</span><span class=p>,</span>
</span><span id=__span-20-13><a id=__codelineno-20-13 name=__codelineno-20-13 href=#__codelineno-20-13></a><span class=w>        </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=k>new</span>
</span><span id=__span-20-14><a id=__codelineno-20-14 name=__codelineno-20-14 href=#__codelineno-20-14></a><span class=w>        </span><span class=p>{</span>
</span><span id=__span-20-15><a id=__codelineno-20-15 name=__codelineno-20-15 href=#__codelineno-20-15></a><span class=w>            </span><span class=n>ProcessingTime</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>result</span><span class=p>.</span><span class=n>Duration</span><span class=p>,</span>
</span><span id=__span-20-16><a id=__codelineno-20-16 name=__codelineno-20-16 href=#__codelineno-20-16></a><span class=w>            </span><span class=n>RecordsProcessed</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>result</span><span class=p>.</span><span class=n>RecordCount</span><span class=p>,</span>
</span><span id=__span-20-17><a id=__codelineno-20-17 name=__codelineno-20-17 href=#__codelineno-20-17></a><span class=w>            </span><span class=n>ResultsUrl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>result</span><span class=p>.</span><span class=n>DownloadUrl</span><span class=p>,</span>
</span><span id=__span-20-18><a id=__codelineno-20-18 name=__codelineno-20-18 href=#__codelineno-20-18></a><span class=w>            </span><span class=n>Status</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;Success&quot;</span>
</span><span id=__span-20-19><a id=__codelineno-20-19 name=__codelineno-20-19 href=#__codelineno-20-19></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-20-20><a id=__codelineno-20-20 name=__codelineno-20-20 href=#__codelineno-20-20></a><span class=w>        </span><span class=n>scope</span><span class=p>:</span><span class=w> </span><span class=s>$&quot;Processing Job #{request.JobId}&quot;</span>
</span><span id=__span-20-21><a id=__codelineno-20-21 name=__codelineno-20-21 href=#__codelineno-20-21></a><span class=w>    </span><span class=p>);</span>
</span><span id=__span-20-22><a id=__codelineno-20-22 name=__codelineno-20-22 href=#__codelineno-20-22></a><span class=p>});</span>
</span></code></pre></div> <h3 id=example-4-multi-tenant-notification-system>Example 4: Multi-Tenant Notification System<a class=headerlink href=#example-4-multi-tenant-notification-system title="Link to this section">&para;</a></h3> <p>Send notifications across different tenants:</p> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=kt>var</span><span class=w> </span><span class=n>notificationWorkflow</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>agent</span><span class=p>.</span><span class=n>Workflows</span><span class=p>.</span><span class=n>DefineBuiltIn</span><span class=p>(</span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;NotificationService&quot;</span><span class=p>);</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=n>notificationWorkflow</span><span class=p>.</span><span class=n>RegisterWorkflow</span><span class=p>(</span><span class=k>async</span><span class=w> </span><span class=p>(</span><span class=n>NotificationRequest</span><span class=w> </span><span class=n>notification</span><span class=p>)</span><span class=w> </span><span class=o>=&gt;</span>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=p>{</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=w>    </span><span class=c1>// Automatically uses correct tenant from workflow context</span>
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a><span class=w>    </span><span class=kt>var</span><span class=w> </span><span class=n>tenantId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>TenantId</span><span class=p>;</span>
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a>
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a><span class=w>    </span><span class=c1>// Send to users within the tenant</span>
</span><span id=__span-21-9><a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a><span class=w>    </span><span class=k>foreach</span><span class=w> </span><span class=p>(</span><span class=kt>var</span><span class=w> </span><span class=n>userId</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>notification</span><span class=p>.</span><span class=n>RecipientIds</span><span class=p>)</span>
</span><span id=__span-21-10><a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-21-11><a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a><span class=w>        </span><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-21-12><a id=__codelineno-21-12 name=__codelineno-21-12 href=#__codelineno-21-12></a><span class=w>            </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>userId</span><span class=p>,</span>
</span><span id=__span-21-13><a id=__codelineno-21-13 name=__codelineno-21-13 href=#__codelineno-21-13></a><span class=w>            </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=n>notification</span><span class=p>.</span><span class=n>Message</span><span class=p>,</span>
</span><span id=__span-21-14><a id=__codelineno-21-14 name=__codelineno-21-14 href=#__codelineno-21-14></a><span class=w>            </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=n>notification</span><span class=p>.</span><span class=n>Data</span><span class=p>,</span>
</span><span id=__span-21-15><a id=__codelineno-21-15 name=__codelineno-21-15 href=#__codelineno-21-15></a><span class=w>            </span><span class=n>scope</span><span class=p>:</span><span class=w> </span><span class=n>notification</span><span class=p>.</span><span class=n>Category</span>
</span><span id=__span-21-16><a id=__codelineno-21-16 name=__codelineno-21-16 href=#__codelineno-21-16></a><span class=w>        </span><span class=p>);</span>
</span><span id=__span-21-17><a id=__codelineno-21-17 name=__codelineno-21-17 href=#__codelineno-21-17></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-21-18><a id=__codelineno-21-18 name=__codelineno-21-18 href=#__codelineno-21-18></a><span class=p>});</span>
</span></code></pre></div> <h3 id=example-5-analytics-dashboard-updates>Example 5: Analytics Dashboard Updates<a class=headerlink href=#example-5-analytics-dashboard-updates title="Link to this section">&para;</a></h3> <p>Periodically update user dashboards:</p> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=kt>var</span><span class=w> </span><span class=n>analyticsWorkflow</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>agent</span><span class=p>.</span><span class=n>Workflows</span><span class=p>.</span><span class=n>DefineBuiltIn</span><span class=p>(</span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;WeeklyAnalytics&quot;</span><span class=p>);</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=n>analyticsWorkflow</span><span class=p>.</span><span class=n>RegisterWorkflow</span><span class=p>(</span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=o>=&gt;</span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=p>{</span>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a><span class=w>    </span><span class=kt>var</span><span class=w> </span><span class=n>users</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=n>GetActiveUsers</span><span class=p>();</span>
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a>
</span><span id=__span-22-7><a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a><span class=w>    </span><span class=k>foreach</span><span class=w> </span><span class=p>(</span><span class=kt>var</span><span class=w> </span><span class=n>user</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>users</span><span class=p>)</span>
</span><span id=__span-22-8><a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-22-9><a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a><span class=w>        </span><span class=kt>var</span><span class=w> </span><span class=n>analytics</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=n>GenerateUserAnalytics</span><span class=p>(</span><span class=n>user</span><span class=p>.</span><span class=n>Id</span><span class=p>);</span>
</span><span id=__span-22-10><a id=__codelineno-22-10 name=__codelineno-22-10 href=#__codelineno-22-10></a>
</span><span id=__span-22-11><a id=__codelineno-22-11 name=__codelineno-22-11 href=#__codelineno-22-11></a><span class=w>        </span><span class=c1>// Send dashboard data as the Dashboard workflow</span>
</span><span id=__span-22-12><a id=__codelineno-22-12 name=__codelineno-22-12 href=#__codelineno-22-12></a><span class=w>        </span><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendDataAsWorkflowAsync</span><span class=p>(</span>
</span><span id=__span-22-13><a id=__codelineno-22-13 name=__codelineno-22-13 href=#__codelineno-22-13></a><span class=w>            </span><span class=n>builtinWorkflowName</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Dashboard&quot;</span><span class=p>,</span>
</span><span id=__span-22-14><a id=__codelineno-22-14 name=__codelineno-22-14 href=#__codelineno-22-14></a><span class=w>            </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>user</span><span class=p>.</span><span class=n>Id</span><span class=p>,</span>
</span><span id=__span-22-15><a id=__codelineno-22-15 name=__codelineno-22-15 href=#__codelineno-22-15></a><span class=w>            </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Your weekly analytics report&quot;</span><span class=p>,</span>
</span><span id=__span-22-16><a id=__codelineno-22-16 name=__codelineno-22-16 href=#__codelineno-22-16></a><span class=w>            </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=k>new</span>
</span><span id=__span-22-17><a id=__codelineno-22-17 name=__codelineno-22-17 href=#__codelineno-22-17></a><span class=w>            </span><span class=p>{</span>
</span><span id=__span-22-18><a id=__codelineno-22-18 name=__codelineno-22-18 href=#__codelineno-22-18></a><span class=w>                </span><span class=n>WeekEnding</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>DateTime</span><span class=p>.</span><span class=n>UtcNow</span><span class=p>.</span><span class=n>Date</span><span class=p>,</span>
</span><span id=__span-22-19><a id=__codelineno-22-19 name=__codelineno-22-19 href=#__codelineno-22-19></a><span class=w>                </span><span class=n>Summary</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>analytics</span><span class=p>.</span><span class=n>Summary</span><span class=p>,</span>
</span><span id=__span-22-20><a id=__codelineno-22-20 name=__codelineno-22-20 href=#__codelineno-22-20></a><span class=w>                </span><span class=n>Charts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>analytics</span><span class=p>.</span><span class=n>ChartData</span><span class=p>,</span>
</span><span id=__span-22-21><a id=__codelineno-22-21 name=__codelineno-22-21 href=#__codelineno-22-21></a><span class=w>                </span><span class=n>Insights</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>analytics</span><span class=p>.</span><span class=n>AutomatedInsights</span>
</span><span id=__span-22-22><a id=__codelineno-22-22 name=__codelineno-22-22 href=#__codelineno-22-22></a><span class=w>            </span><span class=p>},</span>
</span><span id=__span-22-23><a id=__codelineno-22-23 name=__codelineno-22-23 href=#__codelineno-22-23></a><span class=w>            </span><span class=n>scope</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Weekly Reports&quot;</span>
</span><span id=__span-22-24><a id=__codelineno-22-24 name=__codelineno-22-24 href=#__codelineno-22-24></a><span class=w>        </span><span class=p>);</span>
</span><span id=__span-22-25><a id=__codelineno-22-25 name=__codelineno-22-25 href=#__codelineno-22-25></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-22-26><a id=__codelineno-22-26 name=__codelineno-22-26 href=#__codelineno-22-26></a><span class=p>});</span>
</span></code></pre></div> <h2 id=best-practices>Best Practices<a class=headerlink href=#best-practices title="Link to this section">&para;</a></h2> <h3 id=1-choose-the-right-message-type>1. Choose the Right Message Type<a class=headerlink href=#1-choose-the-right-message-type title="Link to this section">&para;</a></h3> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=c1>//  Good: Text is primary content</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Your package will arrive tomorrow between 2-4 PM&quot;</span>
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a><span class=p>);</span>
</span><span id=__span-23-6><a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a>
</span><span id=__span-23-7><a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a><span class=c1>//  Good: Data is primary content</span>
</span><span id=__span-23-8><a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendDataAsync</span><span class=p>(</span>
</span><span id=__span-23-9><a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-23-10><a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Dashboard update&quot;</span><span class=p>,</span>
</span><span id=__span-23-11><a id=__codelineno-23-11 name=__codelineno-23-11 href=#__codelineno-23-11></a><span class=w>    </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=n>dashboardMetrics</span>
</span><span id=__span-23-12><a id=__codelineno-23-12 name=__codelineno-23-12 href=#__codelineno-23-12></a><span class=p>);</span>
</span><span id=__span-23-13><a id=__codelineno-23-13 name=__codelineno-23-13 href=#__codelineno-23-13></a>
</span><span id=__span-23-14><a id=__codelineno-23-14 name=__codelineno-23-14 href=#__codelineno-23-14></a><span class=c1>//  Bad: Sending important structured data via chat</span>
</span><span id=__span-23-15><a id=__codelineno-23-15 name=__codelineno-23-15 href=#__codelineno-23-15></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-23-16><a id=__codelineno-23-16 name=__codelineno-23-16 href=#__codelineno-23-16></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-23-17><a id=__codelineno-23-17 name=__codelineno-23-17 href=#__codelineno-23-17></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Here&#39;s your data&quot;</span><span class=p>,</span>
</span><span id=__span-23-18><a id=__codelineno-23-18 name=__codelineno-23-18 href=#__codelineno-23-18></a><span class=w>    </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=n>complexAnalytics</span><span class=w>  </span><span class=c1>// Should use SendDataAsync instead</span>
</span><span id=__span-23-19><a id=__codelineno-23-19 name=__codelineno-23-19 href=#__codelineno-23-19></a><span class=p>);</span>
</span></code></pre></div> <h3 id=2-use-workflow-impersonation-for-user-context>2. Use Workflow Impersonation for User Context<a class=headerlink href=#2-use-workflow-impersonation-for-user-context title="Link to this section">&para;</a></h3> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=c1>//  Good: Background workflow sends as main workflow</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=c1>// User sees message in their familiar conversation context</span>
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsWorkflowAsync</span><span class=p>(</span>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a><span class=w>    </span><span class=n>builtinWorkflowName</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Conversational&quot;</span><span class=p>,</span>
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-24-6><a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Update from background monitoring&quot;</span>
</span><span id=__span-24-7><a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a><span class=p>);</span>
</span><span id=__span-24-8><a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a>
</span><span id=__span-24-9><a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a><span class=c1>//  Bad: Background workflow sends as itself</span>
</span><span id=__span-24-10><a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a><span class=c1>// User receives message from unfamiliar workflow name</span>
</span><span id=__span-24-11><a id=__codelineno-24-11 name=__codelineno-24-11 href=#__codelineno-24-11></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-24-12><a id=__codelineno-24-12 name=__codelineno-24-12 href=#__codelineno-24-12></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-24-13><a id=__codelineno-24-13 name=__codelineno-24-13 href=#__codelineno-24-13></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Update from OrderMonitoringWorkflow_Background_v2&quot;</span>
</span><span id=__span-24-14><a id=__codelineno-24-14 name=__codelineno-24-14 href=#__codelineno-24-14></a><span class=p>);</span>
</span></code></pre></div> <h3 id=3-provide-clear-actionable-messages>3. Provide Clear, Actionable Messages<a class=headerlink href=#3-provide-clear-actionable-messages title="Link to this section">&para;</a></h3> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=c1>//  Vague message</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Update&quot;</span>
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a><span class=p>);</span>
</span><span id=__span-25-6><a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a>
</span><span id=__span-25-7><a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a><span class=c1>//  Clear and informative</span>
</span><span id=__span-25-8><a id=__codelineno-25-8 name=__codelineno-25-8 href=#__codelineno-25-8></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-25-9><a id=__codelineno-25-9 name=__codelineno-25-9 href=#__codelineno-25-9></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-25-10><a id=__codelineno-25-10 name=__codelineno-25-10 href=#__codelineno-25-10></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Your order #12345 has shipped and will arrive by Friday, Jan 24th&quot;</span>
</span><span id=__span-25-11><a id=__codelineno-25-11 name=__codelineno-25-11 href=#__codelineno-25-11></a><span class=p>);</span>
</span></code></pre></div> <h3 id=4-use-scope-for-topic-organization>4. Use Scope for Topic Organization<a class=headerlink href=#4-use-scope-for-topic-organization title="Link to this section">&para;</a></h3> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=c1>//  Good: Organized by topic</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Delivery scheduled for tomorrow&quot;</span><span class=p>,</span>
</span><span id=__span-26-5><a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a><span class=w>    </span><span class=n>scope</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Order #12345 - Delivery Updates&quot;</span>
</span><span id=__span-26-6><a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a><span class=p>);</span>
</span><span id=__span-26-7><a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a>
</span><span id=__span-26-8><a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-26-9><a id=__codelineno-26-9 name=__codelineno-26-9 href=#__codelineno-26-9></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-26-10><a id=__codelineno-26-10 name=__codelineno-26-10 href=#__codelineno-26-10></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Payment received, thank you!&quot;</span><span class=p>,</span>
</span><span id=__span-26-11><a id=__codelineno-26-11 name=__codelineno-26-11 href=#__codelineno-26-11></a><span class=w>    </span><span class=n>scope</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Order #12345 - Payment&quot;</span>
</span><span id=__span-26-12><a id=__codelineno-26-12 name=__codelineno-26-12 href=#__codelineno-26-12></a><span class=p>);</span>
</span><span id=__span-26-13><a id=__codelineno-26-13 name=__codelineno-26-13 href=#__codelineno-26-13></a>
</span><span id=__span-26-14><a id=__codelineno-26-14 name=__codelineno-26-14 href=#__codelineno-26-14></a><span class=c1>//  Bad: Everything in general conversation</span>
</span><span id=__span-26-15><a id=__codelineno-26-15 name=__codelineno-26-15 href=#__codelineno-26-15></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-26-16><a id=__codelineno-26-16 name=__codelineno-26-16 href=#__codelineno-26-16></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-26-17><a id=__codelineno-26-17 name=__codelineno-26-17 href=#__codelineno-26-17></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Various updates about different things&quot;</span>
</span><span id=__span-26-18><a id=__codelineno-26-18 name=__codelineno-26-18 href=#__codelineno-26-18></a><span class=w>    </span><span class=c1>// No scope = messages get mixed together</span>
</span><span id=__span-26-19><a id=__codelineno-26-19 name=__codelineno-26-19 href=#__codelineno-26-19></a><span class=p>);</span>
</span></code></pre></div> <h3 id=5-handle-errors-gracefully>5. Handle Errors Gracefully<a class=headerlink href=#5-handle-errors-gracefully title="Link to this section">&para;</a></h3> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=c1>//  Good: Proper error handling</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=k>try</span>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=p>{</span>
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=w>    </span><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=w>        </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>userId</span><span class=p>,</span>
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a><span class=w>        </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=n>notificationMessage</span>
</span><span id=__span-27-7><a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a><span class=w>    </span><span class=p>);</span>
</span><span id=__span-27-8><a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a><span class=p>}</span>
</span><span id=__span-27-9><a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>Exception</span><span class=w> </span><span class=n>ex</span><span class=p>)</span>
</span><span id=__span-27-10><a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a><span class=p>{</span>
</span><span id=__span-27-11><a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a><span class=w>    </span><span class=c1>// Log the error</span>
</span><span id=__span-27-12><a id=__codelineno-27-12 name=__codelineno-27-12 href=#__codelineno-27-12></a><span class=w>    </span><span class=n>logger</span><span class=p>.</span><span class=n>LogError</span><span class=p>(</span><span class=n>ex</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Failed to send notification to user {UserId}&quot;</span><span class=p>,</span><span class=w> </span><span class=n>userId</span><span class=p>);</span>
</span><span id=__span-27-13><a id=__codelineno-27-13 name=__codelineno-27-13 href=#__codelineno-27-13></a>
</span><span id=__span-27-14><a id=__codelineno-27-14 name=__codelineno-27-14 href=#__codelineno-27-14></a><span class=w>    </span><span class=c1>// Consider retry logic or fallback mechanisms</span>
</span><span id=__span-27-15><a id=__codelineno-27-15 name=__codelineno-27-15 href=#__codelineno-27-15></a><span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nf>QueueForRetry</span><span class=p>(</span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=n>notificationMessage</span><span class=p>);</span>
</span><span id=__span-27-16><a id=__codelineno-27-16 name=__codelineno-27-16 href=#__codelineno-27-16></a><span class=p>}</span>
</span><span id=__span-27-17><a id=__codelineno-27-17 name=__codelineno-27-17 href=#__codelineno-27-17></a>
</span><span id=__span-27-18><a id=__codelineno-27-18 name=__codelineno-27-18 href=#__codelineno-27-18></a><span class=c1>//  Bad: Unhandled failures</span>
</span><span id=__span-27-19><a id=__codelineno-27-19 name=__codelineno-27-19 href=#__codelineno-27-19></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-27-20><a id=__codelineno-27-20 name=__codelineno-27-20 href=#__codelineno-27-20></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>userId</span><span class=p>,</span>
</span><span id=__span-27-21><a id=__codelineno-27-21 name=__codelineno-27-21 href=#__codelineno-27-21></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=n>notificationMessage</span>
</span><span id=__span-27-22><a id=__codelineno-27-22 name=__codelineno-27-22 href=#__codelineno-27-22></a><span class=p>);</span><span class=w> </span><span class=c1>// No error handling - failures go unnoticed</span>
</span></code></pre></div> <h3 id=6-use-hints-for-message-processing>6. Use Hints for Message Processing<a class=headerlink href=#6-use-hints-for-message-processing title="Link to this section">&para;</a></h3> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=c1>//  Good: Hints help client applications process messages</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Critical: Your subscription expires in 24 hours&quot;</span><span class=p>,</span>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a><span class=w>    </span><span class=n>hint</span><span class=p>:</span><span class=w> </span><span class=s>&quot;subscription-urgent&quot;</span><span class=w>  </span><span class=c1>// UI can show special styling</span>
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a><span class=p>);</span>
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a>
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-28-9><a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=s>&quot;user-123&quot;</span><span class=p>,</span>
</span><span id=__span-28-10><a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Your weekly summary is ready&quot;</span><span class=p>,</span>
</span><span id=__span-28-11><a id=__codelineno-28-11 name=__codelineno-28-11 href=#__codelineno-28-11></a><span class=w>    </span><span class=n>hint</span><span class=p>:</span><span class=w> </span><span class=s>&quot;weekly-summary&quot;</span><span class=w>  </span><span class=c1>// UI can route to appropriate view</span>
</span><span id=__span-28-12><a id=__codelineno-28-12 name=__codelineno-28-12 href=#__codelineno-28-12></a><span class=p>);</span>
</span></code></pre></div> <h3 id=7-respect-user-preferences>7. Respect User Preferences<a class=headerlink href=#7-respect-user-preferences title="Link to this section">&para;</a></h3> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=c1>//  Good: Check user preferences before sending</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a><span class=kt>var</span><span class=w> </span><span class=n>preferences</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=n>GetUserNotificationPreferences</span><span class=p>(</span><span class=n>userId</span><span class=p>);</span>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>preferences</span><span class=p>.</span><span class=n>AllowMarketingNotifications</span><span class=p>)</span>
</span><span id=__span-29-5><a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a><span class=p>{</span>
</span><span id=__span-29-6><a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a><span class=w>    </span><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-29-7><a id=__codelineno-29-7 name=__codelineno-29-7 href=#__codelineno-29-7></a><span class=w>        </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>userId</span><span class=p>,</span>
</span><span id=__span-29-8><a id=__codelineno-29-8 name=__codelineno-29-8 href=#__codelineno-29-8></a><span class=w>        </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;New features available in your dashboard!&quot;</span>
</span><span id=__span-29-9><a id=__codelineno-29-9 name=__codelineno-29-9 href=#__codelineno-29-9></a><span class=w>    </span><span class=p>);</span>
</span><span id=__span-29-10><a id=__codelineno-29-10 name=__codelineno-29-10 href=#__codelineno-29-10></a><span class=p>}</span>
</span><span id=__span-29-11><a id=__codelineno-29-11 name=__codelineno-29-11 href=#__codelineno-29-11></a>
</span><span id=__span-29-12><a id=__codelineno-29-12 name=__codelineno-29-12 href=#__codelineno-29-12></a><span class=c1>// For critical notifications, always send but respect quiet hours</span>
</span><span id=__span-29-13><a id=__codelineno-29-13 name=__codelineno-29-13 href=#__codelineno-29-13></a><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>preferences</span><span class=p>.</span><span class=n>QuietHoursEnabled</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>IsInQuietHours</span><span class=p>(</span><span class=n>preferences</span><span class=p>))</span>
</span><span id=__span-29-14><a id=__codelineno-29-14 name=__codelineno-29-14 href=#__codelineno-29-14></a><span class=p>{</span>
</span><span id=__span-29-15><a id=__codelineno-29-15 name=__codelineno-29-15 href=#__codelineno-29-15></a><span class=w>    </span><span class=c1>// Queue for later delivery</span>
</span><span id=__span-29-16><a id=__codelineno-29-16 name=__codelineno-29-16 href=#__codelineno-29-16></a><span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nf>QueueNotificationForLater</span><span class=p>(</span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=n>message</span><span class=p>);</span>
</span><span id=__span-29-17><a id=__codelineno-29-17 name=__codelineno-29-17 href=#__codelineno-29-17></a><span class=p>}</span>
</span><span id=__span-29-18><a id=__codelineno-29-18 name=__codelineno-29-18 href=#__codelineno-29-18></a><span class=k>else</span>
</span><span id=__span-29-19><a id=__codelineno-29-19 name=__codelineno-29-19 href=#__codelineno-29-19></a><span class=p>{</span>
</span><span id=__span-29-20><a id=__codelineno-29-20 name=__codelineno-29-20 href=#__codelineno-29-20></a><span class=w>    </span><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-29-21><a id=__codelineno-29-21 name=__codelineno-29-21 href=#__codelineno-29-21></a><span class=w>        </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>userId</span><span class=p>,</span>
</span><span id=__span-29-22><a id=__codelineno-29-22 name=__codelineno-29-22 href=#__codelineno-29-22></a><span class=w>        </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=n>message</span>
</span><span id=__span-29-23><a id=__codelineno-29-23 name=__codelineno-29-23 href=#__codelineno-29-23></a><span class=w>    </span><span class=p>);</span>
</span><span id=__span-29-24><a id=__codelineno-29-24 name=__codelineno-29-24 href=#__codelineno-29-24></a><span class=p>}</span>
</span></code></pre></div> <h3 id=8-batch-notifications-efficiently>8. Batch Notifications Efficiently<a class=headerlink href=#8-batch-notifications-efficiently title="Link to this section">&para;</a></h3> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=c1>//  Good: Efficient batching</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=kt>var</span><span class=w> </span><span class=n>users</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=n>GetUsersToNotify</span><span class=p>();</span>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a><span class=kt>var</span><span class=w> </span><span class=n>sendTasks</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Task</span><span class=o>&gt;</span><span class=p>();</span>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a>
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a><span class=k>foreach</span><span class=w> </span><span class=p>(</span><span class=kt>var</span><span class=w> </span><span class=n>user</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>users</span><span class=p>)</span>
</span><span id=__span-30-6><a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a><span class=p>{</span>
</span><span id=__span-30-7><a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a><span class=w>    </span><span class=c1>// Start all sends concurrently</span>
</span><span id=__span-30-8><a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a><span class=w>    </span><span class=n>sendTasks</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-30-9><a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a><span class=w>        </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>user</span><span class=p>.</span><span class=n>Id</span><span class=p>,</span>
</span><span id=__span-30-10><a id=__codelineno-30-10 name=__codelineno-30-10 href=#__codelineno-30-10></a><span class=w>        </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>$&quot;Hello {user.Name}, your report is ready!&quot;</span><span class=p>,</span>
</span><span id=__span-30-11><a id=__codelineno-30-11 name=__codelineno-30-11 href=#__codelineno-30-11></a><span class=w>        </span><span class=n>scope</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Weekly Reports&quot;</span>
</span><span id=__span-30-12><a id=__codelineno-30-12 name=__codelineno-30-12 href=#__codelineno-30-12></a><span class=w>    </span><span class=p>));</span>
</span><span id=__span-30-13><a id=__codelineno-30-13 name=__codelineno-30-13 href=#__codelineno-30-13></a><span class=p>}</span>
</span><span id=__span-30-14><a id=__codelineno-30-14 name=__codelineno-30-14 href=#__codelineno-30-14></a>
</span><span id=__span-30-15><a id=__codelineno-30-15 name=__codelineno-30-15 href=#__codelineno-30-15></a><span class=c1>// Wait for all to complete</span>
</span><span id=__span-30-16><a id=__codelineno-30-16 name=__codelineno-30-16 href=#__codelineno-30-16></a><span class=k>await</span><span class=w> </span><span class=n>Task</span><span class=p>.</span><span class=n>WhenAll</span><span class=p>(</span><span class=n>sendTasks</span><span class=p>);</span>
</span><span id=__span-30-17><a id=__codelineno-30-17 name=__codelineno-30-17 href=#__codelineno-30-17></a>
</span><span id=__span-30-18><a id=__codelineno-30-18 name=__codelineno-30-18 href=#__codelineno-30-18></a><span class=c1>//  Bad: Sequential sending (slow)</span>
</span><span id=__span-30-19><a id=__codelineno-30-19 name=__codelineno-30-19 href=#__codelineno-30-19></a><span class=k>foreach</span><span class=w> </span><span class=p>(</span><span class=kt>var</span><span class=w> </span><span class=n>user</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>users</span><span class=p>)</span>
</span><span id=__span-30-20><a id=__codelineno-30-20 name=__codelineno-30-20 href=#__codelineno-30-20></a><span class=p>{</span>
</span><span id=__span-30-21><a id=__codelineno-30-21 name=__codelineno-30-21 href=#__codelineno-30-21></a><span class=w>    </span><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-30-22><a id=__codelineno-30-22 name=__codelineno-30-22 href=#__codelineno-30-22></a><span class=w>        </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>user</span><span class=p>.</span><span class=n>Id</span><span class=p>,</span>
</span><span id=__span-30-23><a id=__codelineno-30-23 name=__codelineno-30-23 href=#__codelineno-30-23></a><span class=w>        </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=n>message</span>
</span><span id=__span-30-24><a id=__codelineno-30-24 name=__codelineno-30-24 href=#__codelineno-30-24></a><span class=w>    </span><span class=p>);</span>
</span><span id=__span-30-25><a id=__codelineno-30-25 name=__codelineno-30-25 href=#__codelineno-30-25></a><span class=w>    </span><span class=c1>// Waits for each to complete before starting next</span>
</span><span id=__span-30-26><a id=__codelineno-30-26 name=__codelineno-30-26 href=#__codelineno-30-26></a><span class=p>}</span>
</span></code></pre></div> <h2 id=common-use-cases>Common Use Cases<a class=headerlink href=#common-use-cases title="Link to this section">&para;</a></h2> <h3 id=1-order-status-updates>1. Order Status Updates<a class=headerlink href=#1-order-status-updates title="Link to this section">&para;</a></h3> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=c1>// When order status changes</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsWorkflowAsync</span><span class=p>(</span>
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a><span class=w>    </span><span class=n>builtinWorkflowName</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Conversational&quot;</span><span class=p>,</span>
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>order</span><span class=p>.</span><span class=n>CustomerId</span><span class=p>,</span>
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>$&quot;Order #{order.Id} status: {order.Status}&quot;</span><span class=p>,</span>
</span><span id=__span-31-6><a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a><span class=w>    </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=n>order</span><span class=p>,</span>
</span><span id=__span-31-7><a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a><span class=w>    </span><span class=n>scope</span><span class=p>:</span><span class=w> </span><span class=s>$&quot;Order #{order.Id}&quot;</span>
</span><span id=__span-31-8><a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a><span class=p>);</span>
</span></code></pre></div> <h3 id=2-scheduled-reports>2. Scheduled Reports<a class=headerlink href=#2-scheduled-reports title="Link to this section">&para;</a></h3> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=c1>// Daily/weekly/monthly reports</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendDataAsWorkflowAsync</span><span class=p>(</span>
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a><span class=w>    </span><span class=n>builtinWorkflowName</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Dashboard&quot;</span><span class=p>,</span>
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>user</span><span class=p>.</span><span class=n>Id</span><span class=p>,</span>
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Your monthly analytics report&quot;</span><span class=p>,</span>
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a><span class=w>    </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=n>reportData</span><span class=p>,</span>
</span><span id=__span-32-7><a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a><span class=w>    </span><span class=n>scope</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Monthly Reports&quot;</span>
</span><span id=__span-32-8><a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a><span class=p>);</span>
</span></code></pre></div> <h3 id=3-system-alerts>3. System Alerts<a class=headerlink href=#3-system-alerts title="Link to this section">&para;</a></h3> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=c1>// Critical system notifications</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>admin</span><span class=p>.</span><span class=n>Id</span><span class=p>,</span>
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot; Server CPU usage exceeded 90%&quot;</span><span class=p>,</span>
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a><span class=w>    </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>Server</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;prod-01&quot;</span><span class=p>,</span><span class=w> </span><span class=n>CPU</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>94.2</span><span class=w> </span><span class=p>},</span>
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a><span class=w>    </span><span class=n>hint</span><span class=p>:</span><span class=w> </span><span class=s>&quot;critical-alert&quot;</span>
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a><span class=p>);</span>
</span></code></pre></div> <h3 id=4-approval-requests>4. Approval Requests<a class=headerlink href=#4-approval-requests title="Link to this section">&para;</a></h3> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=c1>// Request human approval</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>approver</span><span class=p>.</span><span class=n>Id</span><span class=p>,</span>
</span><span id=__span-34-4><a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Approval needed: Purchase order for $5,000&quot;</span><span class=p>,</span>
</span><span id=__span-34-5><a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a><span class=w>    </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=n>purchaseOrder</span><span class=p>,</span>
</span><span id=__span-34-6><a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a><span class=w>    </span><span class=n>scope</span><span class=p>:</span><span class=w> </span><span class=s>$&quot;Approval Request #{purchaseOrder.Id}&quot;</span><span class=p>,</span>
</span><span id=__span-34-7><a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a><span class=w>    </span><span class=n>hint</span><span class=p>:</span><span class=w> </span><span class=s>&quot;approval-request&quot;</span>
</span><span id=__span-34-8><a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a><span class=p>);</span>
</span></code></pre></div> <h3 id=5-completion-notifications>5. Completion Notifications<a class=headerlink href=#5-completion-notifications title="Link to this section">&para;</a></h3> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=c1>// Background task completion</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsWorkflowAsync</span><span class=p>(</span>
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a><span class=w>    </span><span class=n>builtinWorkflowName</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Conversational&quot;</span><span class=p>,</span>
</span><span id=__span-35-4><a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>user</span><span class=p>.</span><span class=n>Id</span><span class=p>,</span>
</span><span id=__span-35-5><a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot; Your export is ready! Download link expires in 24 hours.&quot;</span><span class=p>,</span>
</span><span id=__span-35-6><a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a><span class=w>    </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>DownloadUrl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>exportUrl</span><span class=p>,</span><span class=w> </span><span class=n>ExpiresAt</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>expiryTime</span><span class=w> </span><span class=p>}</span>
</span><span id=__span-35-7><a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a><span class=p>);</span>
</span></code></pre></div> <h2 id=comparison-proactive-messaging-vs-replying>Comparison: Proactive Messaging vs Replying<a class=headerlink href=#comparison-proactive-messaging-vs-replying title="Link to this section">&para;</a></h2> <table> <thead> <tr> <th>Aspect</th> <th>Proactive Messaging</th> <th>Replying</th> </tr> </thead> <tbody> <tr> <td><strong>Initiator</strong></td> <td>Agent initiates</td> <td>User initiates</td> </tr> <tr> <td><strong>Context</strong></td> <td>No incoming message</td> <td>Responding to user message</td> </tr> <tr> <td><strong>Access</strong></td> <td><code>XiansContext.Messaging</code></td> <td><code>context.ReplyAsync()</code> in listeners</td> </tr> <tr> <td><strong>Use Cases</strong></td> <td>Background workflows, events, schedules</td> <td>Conversational interactions</td> </tr> <tr> <td><strong>Workflow</strong></td> <td>Any workflow or activity</td> <td>Message listener context</td> </tr> <tr> <td><strong>Participant</strong></td> <td>Must specify <code>participantId</code></td> <td>Automatic from incoming message</td> </tr> </tbody> </table> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Link to this section">&para;</a></h2> <h3 id=messages-not-appearing>Messages Not Appearing<a class=headerlink href=#messages-not-appearing title="Link to this section">&para;</a></h3> <p><strong>Problem</strong>: Messages sent but users don't receive them.</p> <p><strong>Solutions</strong>: 1. Verify the participant ID is correct 2. Check that the workflow context is properly initialized 3. Ensure tenant ID is correctly set for multi-tenant scenarios 4. Review logs for HTTP service errors</p> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=c1>// Add logging for debugging</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a><span class=n>logger</span><span class=p>.</span><span class=n>LogInformation</span><span class=p>(</span>
</span><span id=__span-36-3><a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a><span class=w>    </span><span class=s>&quot;Sending message to participant {ParticipantId} in tenant {TenantId}&quot;</span><span class=p>,</span>
</span><span id=__span-36-4><a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a><span class=w>    </span><span class=n>participantId</span><span class=p>,</span>
</span><span id=__span-36-5><a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a><span class=w>    </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>TenantId</span>
</span><span id=__span-36-6><a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a><span class=p>);</span>
</span><span id=__span-36-7><a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a>
</span><span id=__span-36-8><a id=__codelineno-36-8 name=__codelineno-36-8 href=#__codelineno-36-8></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-36-9><a id=__codelineno-36-9 name=__codelineno-36-9 href=#__codelineno-36-9></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>participantId</span><span class=p>,</span>
</span><span id=__span-36-10><a id=__codelineno-36-10 name=__codelineno-36-10 href=#__codelineno-36-10></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=n>message</span>
</span><span id=__span-36-11><a id=__codelineno-36-11 name=__codelineno-36-11 href=#__codelineno-36-11></a><span class=p>);</span>
</span></code></pre></div> <h3 id=workflow-impersonation-not-working>Workflow Impersonation Not Working<a class=headerlink href=#workflow-impersonation-not-working title="Link to this section">&para;</a></h3> <p><strong>Problem</strong>: Messages appear from wrong workflow.</p> <p><strong>Solutions</strong>: 1. Use the workflow <strong>name</strong> (not full type) in <code>builtinWorkflowName</code> 2. Ensure the target workflow exists and is properly defined 3. Verify the workflow name matches exactly (case-sensitive)</p> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=c1>//  Correct: Use the workflow name</span>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsWorkflowAsync</span><span class=p>(</span>
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a><span class=w>    </span><span class=n>builtinWorkflowName</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Conversational&quot;</span><span class=p>,</span><span class=w>  </span><span class=c1>// Name from DefineBuiltIn</span>
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>userId</span><span class=p>,</span>
</span><span id=__span-37-5><a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=n>message</span>
</span><span id=__span-37-6><a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a><span class=p>);</span>
</span><span id=__span-37-7><a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a>
</span><span id=__span-37-8><a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a><span class=c1>//  Wrong: Don&#39;t use full workflow type</span>
</span><span id=__span-37-9><a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsWorkflowAsync</span><span class=p>(</span>
</span><span id=__span-37-10><a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a><span class=w>    </span><span class=n>builtinWorkflowName</span><span class=p>:</span><span class=w> </span><span class=s>&quot;MyAgent:Conversational&quot;</span><span class=p>,</span><span class=w>  </span><span class=c1>// Too specific</span>
</span><span id=__span-37-11><a id=__codelineno-37-11 name=__codelineno-37-11 href=#__codelineno-37-11></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>userId</span><span class=p>,</span>
</span><span id=__span-37-12><a id=__codelineno-37-12 name=__codelineno-37-12 href=#__codelineno-37-12></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=n>message</span>
</span><span id=__span-37-13><a id=__codelineno-37-13 name=__codelineno-37-13 href=#__codelineno-37-13></a><span class=p>);</span>
</span></code></pre></div> <h3 id=messages-in-wrong-scope>Messages in Wrong Scope<a class=headerlink href=#messages-in-wrong-scope title="Link to this section">&para;</a></h3> <p><strong>Problem</strong>: Messages appearing in unexpected conversation topics.</p> <p><strong>Solutions</strong>: 1. Explicitly set <code>scope</code> parameter to organize messages 2. Use consistent scope naming across related messages 3. Remember that <code>null</code> scope is a distinct conversation area</p> <div class="language-csharp highlight"><span class=filename>C#</span><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=c1>//  Explicit scope management</span>
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-38-3><a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>userId</span><span class=p>,</span>
</span><span id=__span-38-4><a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Order shipped&quot;</span><span class=p>,</span>
</span><span id=__span-38-5><a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a><span class=w>    </span><span class=n>scope</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Order #12345&quot;</span><span class=w>  </span><span class=c1>// Explicit scope</span>
</span><span id=__span-38-6><a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a><span class=p>);</span>
</span><span id=__span-38-7><a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a>
</span><span id=__span-38-8><a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a><span class=c1>// Later messages use same scope</span>
</span><span id=__span-38-9><a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a><span class=k>await</span><span class=w> </span><span class=n>XiansContext</span><span class=p>.</span><span class=n>Messaging</span><span class=p>.</span><span class=n>SendChatAsync</span><span class=p>(</span>
</span><span id=__span-38-10><a id=__codelineno-38-10 name=__codelineno-38-10 href=#__codelineno-38-10></a><span class=w>    </span><span class=n>participantId</span><span class=p>:</span><span class=w> </span><span class=n>userId</span><span class=p>,</span>
</span><span id=__span-38-11><a id=__codelineno-38-11 name=__codelineno-38-11 href=#__codelineno-38-11></a><span class=w>    </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Order delivered&quot;</span><span class=p>,</span>
</span><span id=__span-38-12><a id=__codelineno-38-12 name=__codelineno-38-12 href=#__codelineno-38-12></a><span class=w>    </span><span class=n>scope</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Order #12345&quot;</span><span class=w>  </span><span class=c1>// Same scope = same topic</span>
</span><span id=__span-38-13><a id=__codelineno-38-13 name=__codelineno-38-13 href=#__codelineno-38-13></a><span class=p>);</span>
</span></code></pre></div> <h2 id=next-steps>Next Steps<a class=headerlink href=#next-steps title="Link to this section">&para;</a></h2> <ul> <li>Learn about <a href=../replying/ >Replying to User Messages</a> for handling incoming messages</li> <li>Explore <a href=../workflows/ >Workflows</a> to understand workflow structure</li> <li>Review <a href=../scheduling/ >Scheduling</a> for time-based proactive messaging</li> <li>Check out <a href=../A2A/ >A2A Communication</a> for agent-to-agent messaging</li> </ul> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="January 23, 2026 02:56:30 UTC"><span class=timeago datetime=2026-01-23T02:56:30+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="January 23, 2026 02:56:30 UTC">2026-01-23</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Created> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="January 23, 2026 02:56:30 UTC"><span class=timeago datetime=2026-01-23T02:56:30+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="January 23, 2026 02:56:30 UTC">2026-01-23</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> &copy; 2026 <a href=https://xians.ai target=_blank rel=noopener>Xians.ai</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=#__consent>Cookie Settings</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=/other/privacy-policy/ >Privacy Policy</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=/other/terms-of-service/ >Terms of Service</a> </div> </div> <div class=md-social> <a href=https://github.com/XiansAiPlatform target=_blank rel=noopener title="GitHub Organization" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://discord.gg/xians target=_blank rel=noopener title="Discord Community" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg> </a> <a href=https://twitter.com/xiansai target=_blank rel=noopener title=Twitter class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg> </a> <a href=https://xians.ai target=_blank rel=noopener title="Official Website" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M351.9 280H161c2.9 64.5 17.2 123.9 37.5 167.4 11.4 24.5 23.7 41.8 35.1 52.4 11.2 10.5 18.9 12.2 22.9 12.2s11.7-1.7 22.9-12.2c11.4-10.6 23.7-28 35.1-52.4 20.3-43.5 34.6-102.9 37.5-167.4zm-191-48h190.9c-2.8-64.5-17.1-123.9-37.4-167.4-11.4-24.4-23.7-41.8-35.1-52.4C268.1 1.7 260.4 0 256.4 0s-11.7 1.7-22.9 12.2c-11.4 10.6-23.7 28-35.1 52.4-20.3 43.5-34.6 102.9-37.5 167.4m-48 0c3.5-85.6 25.6-165.1 57.9-217.3C78.7 47.3 10.9 131.2 1.5 232zM1.5 280c9.4 100.8 77.2 184.7 169.3 217.3-32.3-52.2-54.4-131.7-57.9-217.3zm398.4 0c-3.5 85.6-25.6 165.1-57.9 217.3 92.1-32.7 159.9-116.5 169.3-217.3zm111.4-48C501.9 131.2 434.1 47.3 342 14.7c32.3 52.2 54.4 131.7 57.9 217.3z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <div class=md-consent data-md-component=consent id=__consent hidden> <div class=md-consent__overlay></div> <aside class=md-consent__inner> <form class="md-consent__form md-grid md-typeset" name=consent> <h4>Cookie consent</h4> <p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p> <input class=md-toggle type=checkbox id=__settings> <div class=md-consent__settings> <ul class=task-list> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=github checked> <span class=task-list-indicator></span> GitHub </label> </li> </ul> </div> <div class=md-consent__controls> <button class="md-button md-button--primary">Accept</button> <button type=reset class="md-button md-button--primary">Reject</button> <label class=md-button for=__settings>Manage settings</label> </div> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.top", "navigation.tracking", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.prune", "search.suggest", "search.highlight", "search.share", "content.tabs.link", "content.code.annotate", "content.code.copy", "content.code.select", "content.action.edit", "content.action.view", "content.tooltips", "content.footnote.tooltips", "header.autohide", "announce.dismiss", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> <script src=../../js/timeago.min.js></script> <script src=../../js/timeago_mkdocs_material.js></script> <script src=../../javascripts/external-links.js></script> <script src=../../javascripts/enhancements.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> </body> </html>